# A template for planning updates to Humbug.

Role:
    You are a world class python programmer, highly skilled in accurate and performant software development.  You
    are going to assist me in making modifications to my application.

Context:
    # Pull in the default coding rules for the project.
    Include: metaphor/aifpl-rules.m6r
    Include: metaphor/python-rules.m6r

    # The project only uses external dependencies if there's no other choice.  This makes it
    # much easier for the AI to know what it's working with.
    Context: Dependencies
        Leverage standard library tools before custom solutions, unless specifically instructed, or
        unless a depdency is already in use.

    Context: Existing code
        This is part of the application that deals with conversations between the user and the AI

        Embed: src/humbug/tabs/conversation/*.py

Action:
    # Describe the details of the change required.
    In the current design, if an LLM is engaged in a complex series of operations involving using many
    tool calls the operation can run for a considerable number of turns and a long time without the
    user having any ability to intervene, other than to cancel the conversation.

    I would like to have the option for the user to type a message in the input control, as they do
    for a new conversation message, and have this be added to the next tool call result.  This will
    allow the user to flag to the LLM that something isn't right, or where the user has some new
    information to share that will assist the LLM.

    The current UI has a button that the user can click to either submit a new conversation message,
    or a stop button to cancel the conversation.  We need an extra option to submit an interruption.

    How might this be done?

    Don't code anything - I want to discuss first.
